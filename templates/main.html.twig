{% extends 'base.html.twig' %}
{% block body %}
    {% set sortColumn = sort.sortColumn.value %}
    {% set sortOrder = sort.sortOrder.value %}
    {% set columns = {
        name: 'Name'|trans,
        rating: 'ğŸ“ˆBGG'|trans,
        minPlayers: 'ğŸ‘¥Min'|trans,
        maxPlayers: 'ğŸ‘¥Max'|trans,
        minPlaytime: 'â³Min'|trans,
        maxPlaytime: 'âŒ›ï¸Max'|trans,
        yearPublished: 'ğŸ“…'
    } %}
    {% dump(sort) %}
    <table class="table is-striped is-fullwidth is-hoverable">
        <thead>
        <tr>
            {% for key, label in columns %}
                <th>
                    <a href="{{ path('library', {orderBy: key, order: sortColumn == key and sortOrder == 'desc' ? 'asc' : 'desc' }) }}">{{ label }}</a>
                    {% if sortColumn == key %}{{ sortOrder == 'asc' ? 'ğŸ”¼' : 'ğŸ”½' }}{% endif %}
                </th>
            {% endfor %}
        </tr>
        </thead>
        {% for game in games %}
            <tr>
                <td class="title is-4">{{ game.name }}</td>
                <td>{{ game.rating|round(1) }}</td>
                <td>{{ game.minPlayers }}ğŸ‘¤</td>
                <td>{{ game.maxPlayers }}ğŸ‘¤</td>
                <td>{{ game.minPlaytime }}'</td>
                <td>{{ game.maxPlaytime }}'</td>
                <td>{{ game.yearPublished }}</td>
            </tr>
            <tr>
                <td colspan="7" class="is-size-7">
                    {% if game.mechanics is not empty %}
                        <span class="title is-6">ğŸ› </span>: {{ game.mechanics|join(', ') }}
                    {% endif %}
                    {% if game.categories is not empty %}
                    <span class="title is-6">ğŸ§©</span>: {{ game.categories|join(', ') }}
                    {% endif %}<br/>
                    {% if game.designers is not empty %}
                        <span class="title is-6">âœï¸</span>: {{ game.designers|join(', ') }}
                    {% endif %}
                    {% if game.publisher is not empty %}
                        <span class="title is-6">ğŸ­</span>: {{ game.publisher }}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock body %}
